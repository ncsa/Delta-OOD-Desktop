echo start before
if [ -z ${HOME+x} ];
then
    export HOME=$(echo ~)
	source /etc/profile
	source /etc/bashrc
	source $HOME/.bashrc
fi

# Export the module function if it exists
[[ $(type -t module) == "function" ]] && export -f module
hostname
pwd

# Apptainer is in path by default
#module load containers/singularity

## some singularity cleanup
unset SINGULARITY_TMPDIR
export SINGULARITYENV_LD_LIBRARY_PATH=$LD_LIBRARY_PATH

apptainer run --cleanenv --nv \
    --bind `pwd`:/cwd,$TMPDIR:/TMPDIR,/projects,/scratch \
    /u/yanzhan2/scratch/Delta-OOD-Desktop/Singularityfiles/desktop-test.sif -d "Desktop-$(hostname)" &
